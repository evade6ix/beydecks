import{a as T,r as n,j as t,L as k}from"./index-yNFFM0-c.js";import{m as D}from"./proxy-3_2GIcS0.js";const f="https://beydecks-production.up.railway.app/api";function E(){const{id:h}=T(),[j,b]=n.useState([]),[o,g]=n.useState(""),[a,N]=n.useState("All"),[r,l]=n.useState(1),m=10;n.useEffect(()=>{fetch(`${f}/events`).then(e=>e.json()).then(e=>{const s=new Date,c=e.filter(w=>new Date(w.startTime)>s);b(c)}),fetch(`${f}/stores/${h}`).then(e=>e.json()).then(e=>g(e.name))},[h]);const i=new Date,x=j.filter(e=>{var s;return((s=e.store)==null?void 0:s.trim().toLowerCase())===o.trim().toLowerCase()}).filter(e=>{const s=new Date(e.startTime);if(a==="This Week"){const c=new Date;return c.setDate(i.getDate()+7),s<=c}return a==="This Month"?s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear():a==="This Year"?s.getFullYear()===i.getFullYear():!0}),d=Math.ceil(x.length/m),u=r*m,y=u-m,p=x.slice(y,u);return t.jsxs(D.div,{className:"p-6 max-w-7xl mx-auto",initial:{opacity:0},animate:{opacity:1},children:[t.jsxs("h1",{className:"text-3xl font-bold mb-4",children:["Upcoming Events for ",o]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"font-semibold mr-2",children:"Timeframe:"}),t.jsxs("select",{value:a,onChange:e=>{N(e.target.value),l(1)},className:"select select-sm select-bordered",children:[t.jsx("option",{children:"All"}),t.jsx("option",{children:"This Week"}),t.jsx("option",{children:"This Month"}),t.jsx("option",{children:"This Year"})]})]}),p.length===0?t.jsx("p",{className:"text-neutral-content",children:"No upcoming events found for this store."}):t.jsx("div",{className:"grid sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>t.jsx("div",{className:"card bg-base-200 shadow-md",children:t.jsxs("div",{className:"card-body",children:[t.jsx("h2",{className:"card-title",children:e.title}),t.jsxs("p",{className:"text-sm text-neutral-content font-medium",children:[t.jsx("span",{className:"font-bold",children:"Store:"})," ",o]}),t.jsxs("p",{className:"text-sm",children:[t.jsx("span",{className:"font-bold",children:"Date:"})," ",new Date(e.startTime).toLocaleString()]}),(e.city||e.region||e.country)&&t.jsxs("p",{className:"text-sm text-neutral-content",children:["📍 ",[e.city,e.region,e.country].filter(Boolean).join(", ")]}),e.capacity!==void 0&&t.jsxs("p",{className:"text-sm text-neutral-content",children:["Capacity: ",e.capacity]}),t.jsxs("div",{className:"card-actions justify-end gap-2",children:[e.buyLink&&t.jsx("a",{href:e.buyLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline btn-sm",children:"Buy Ticket 🎟️"}),t.jsx(k,{to:`/events/${e.id}`,className:"btn btn-secondary btn-sm",children:"View"})]})]})},e.id))}),d>1&&t.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[t.jsx("button",{className:"btn btn-sm",disabled:r===1,onClick:()=>l(e=>e-1),children:"◀ Prev"}),t.jsxs("span",{className:"btn btn-sm btn-disabled",children:["Page ",r," of ",d]}),t.jsx("button",{className:"btn btn-sm",disabled:r===d,onClick:()=>l(e=>e+1),children:"Next ▶"})]})]})}export{E as default};

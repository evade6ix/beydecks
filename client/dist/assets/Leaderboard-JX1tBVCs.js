import{r as x,j as e,L as E}from"./index-yNFFM0-c.js";import{m as B}from"./proxy-3_2GIcS0.js";import{T as L}from"./trophy-DYYWwGaA.js";import{c as g}from"./createLucideIcon-D8Tr6586.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],_=g("award",A);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],S=g("medal",I),$="https://beydecks-production.up.railway.app/api",f=10;function F(){const[b,w]=x.useState([]),[m,P]=x.useState("All"),[p,v]=x.useState("blade"),[o,j]=x.useState(1);x.useEffect(()=>{fetch(`${$}/events`).then(t=>t.json()).then(t=>{const l=new Date;let a=t.filter(s=>new Date(s.endTime)<l);if(m==="Past Week"){const s=new Date;s.setDate(l.getDate()-7),a=a.filter(n=>new Date(n.endTime)>=s)}if(m==="Past Month"){const s=new Date;s.setMonth(l.getMonth()-1),a=a.filter(n=>new Date(n.endTime)>=s)}if(m==="Past Year"){const s=new Date;s.setFullYear(l.getFullYear()-1),a=a.filter(n=>new Date(n.endTime)>=s)}const c={};a.forEach(s=>{var n;return(n=s.topCut)==null?void 0:n.forEach(C=>{var N;return(N=C.combos)==null?void 0:N.forEach(D=>{var y;const u=(y=D[p])==null?void 0:y.trim();u&&(c[u]=(c[u]||0)+1)})})});const r=Object.entries(c).map(([s,n])=>({name:s,count:n})).sort((s,n)=>n.count-s.count);w(r),j(1)})},[m,p]);const M=t=>t===0?e.jsx(L,{className:"text-yellow-400 w-6 h-6"}):t===1?e.jsx(_,{className:"text-gray-400 w-5 h-5"}):t===2?e.jsx(S,{className:"text-amber-700 w-5 h-5"}):null,i=Math.ceil(b.length/f),d=(o-1)*f,k=b.slice(d,d+f),h=t=>{t>=1&&t<=i&&j(t)},T=()=>{const t=[];let a=Math.max(1,o-Math.floor(2.5)),c=Math.min(i,a+5-1);c-a<4&&(a=Math.max(1,c-5+1)),a>1&&(t.push(e.jsx("button",{onClick:()=>h(1),className:"btn btn-sm",children:"1"},"first")),a>2&&t.push(e.jsx("span",{className:"mx-1",children:"..."},"ellipsis-start")));for(let r=a;r<=c;r++)t.push(e.jsx("button",{onClick:()=>h(r),className:`btn btn-sm ${r===o?"btn-primary":""}`,children:r},r));return c<i&&(c<i-1&&t.push(e.jsx("span",{className:"mx-1",children:"..."},"ellipsis-end")),t.push(e.jsx("button",{onClick:()=>h(i),className:"btn btn-sm",children:i},"last"))),t};return e.jsxs(B.div,{className:"p-6 max-w-3xl mx-auto",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Leaderboard"}),e.jsxs("div",{className:"mb-4 flex flex-wrap gap-4 items-center",children:[e.jsx("label",{className:"font-semibold mr-2",children:"Timeframe:"}),e.jsxs("select",{className:"select select-bordered",value:m,onChange:t=>P(t.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Past Week"}),e.jsx("option",{children:"Past Month"}),e.jsx("option",{children:"Past Year"})]}),e.jsx("label",{className:"font-semibold ml-4",children:"Part Type:"}),e.jsxs("select",{className:"select select-bordered",value:p,onChange:t=>v(t.target.value),children:[e.jsx("option",{value:"blade",children:"Blade"}),e.jsx("option",{value:"ratchet",children:"Ratchet"}),e.jsx("option",{value:"bit",children:"Bit"})]})]}),e.jsx("div",{className:"space-y-2",children:k.map((t,l)=>e.jsxs(E,{to:`/${p}s/${encodeURIComponent(t.name)}`,className:"card bg-base-200 p-4 flex justify-between items-center hover:shadow-lg transition",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-lg",children:[d+l+1,"."]}),M(d+l),e.jsx("span",{className:"text-lg font-semibold",children:t.name})]}),e.jsxs("p",{className:"text-sm text-neutral-content",children:[t.count," appearances"]})]},d+l))}),e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-2 flex-wrap",children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>h(o-1),disabled:o===1,children:"< Prev"}),T(),e.jsx("button",{className:"btn btn-sm",onClick:()=>h(o+1),disabled:o===i,children:"Next >"})]})]})}export{F as default};

import{a as P,r as c,j as e,H as $,L as k}from"./index-yNFFM0-c.js";import{m as D}from"./proxy-3_2GIcS0.js";const E="https://beydecks-production.up.railway.app/api";function B(){const{name:s}=P(),[d,w]=c.useState([]),[r,N]=c.useState("All"),[i,u]=c.useState(1),x=7;c.useEffect(()=>{u(1)},[r,s]),c.useEffect(()=>{fetch(`${E}/events`).then(t=>t.json()).then(t=>{const l=new Map,a=new Date;let o=null;r==="Past Week"?(o=new Date(a),o.setDate(a.getDate()-7)):r==="Past Month"?(o=new Date(a),o.setMonth(a.getMonth()-1)):r==="This Year"&&(o=new Date(a.getFullYear(),0,1)),t.filter(n=>new Date(n.endTime)<a).filter(n=>!o||new Date(n.startTime)>=o).forEach(n=>{var h;return(h=n.topCut)==null?void 0:h.forEach(v=>{var f;return(f=v.combos)==null?void 0:f.forEach(({blade:M,ratchet:j,bit:g})=>{if(M.trim().toLowerCase()===(s==null?void 0:s.trim().toLowerCase())){const b=`${j.trim()}::${g.trim()}`;l.has(b)?l.get(b).count++:l.set(b,{ratchet:j.trim(),bit:g.trim(),count:1})}})})});const C=Array.from(l.values()).sort((n,h)=>h.count-n.count);w(C)})},[s,r]);const m=(s==null?void 0:s.replace(/-/g," "))??"Blade",p=Math.ceil(d.length/x),y=c.useMemo(()=>d.slice((i-1)*x,i*x),[d,i]);return e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsxs("title",{children:[m," — Top Combos & Usage Stats | Meta Beys"]}),e.jsx("meta",{name:"description",content:`View the top competitive Beyblade X combos using ${m}. See usage stats and explore optimal pairings.`}),e.jsx("meta",{property:"og:title",content:`${m} — Meta Beys`}),e.jsx("meta",{property:"og:description",content:`Explore combo data and usage statistics for ${m} in real tournaments.`}),e.jsx("meta",{property:"og:url",content:`https://www.metabeys.com/blade/${s}`}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(D.div,{className:"p-6 max-w-4xl mx-auto",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("h1",{className:"text-3xl font-bold mb-4 capitalize",children:m}),e.jsx("p",{className:"text-neutral-content mb-6",children:"Top Combos for this blade (by usage count):"}),e.jsxs("div",{className:"mb-4 w-64",children:[e.jsx("label",{className:"font-semibold mb-1 block",children:"Filter by Timeframe:"}),e.jsxs("select",{className:"select select-bordered w-full",value:r,onChange:t=>N(t.target.value),children:[e.jsx("option",{children:"All"}),e.jsx("option",{children:"Past Week"}),e.jsx("option",{children:"Past Month"}),e.jsx("option",{children:"This Year"})]})]}),e.jsxs("div",{className:"grid gap-4",children:[y.map((t,l)=>{const a=encodeURIComponent(`${s==null?void 0:s.toLowerCase().trim().replace(/\s+/g,"-")}-${t.ratchet.toLowerCase()}-${t.bit.toLowerCase()}`);return e.jsx(k,{to:`/combo/${a}`,className:"block",children:e.jsxs("div",{className:"card bg-base-200 p-4 hover:shadow-md transition cursor-pointer",children:[e.jsxs("p",{className:"font-medium",children:[t.ratchet," / ",t.bit]}),e.jsxs("p",{className:"text-sm text-neutral-content",children:[t.count," use",t.count>1?"s":""]})]})},l)}),!d.length&&e.jsx("p",{className:"text-error text-sm",children:"No combos found for this blade."})]}),p>1&&e.jsxs("div",{className:"mt-6 flex justify-center items-center gap-3",children:[e.jsx("button",{className:"btn btn-sm",onClick:()=>u(t=>Math.max(1,t-1)),disabled:i===1,children:"Prev"}),e.jsxs("span",{children:["Page ",i," of ",p]}),e.jsx("button",{className:"btn btn-sm",onClick:()=>u(t=>Math.min(p,t+1)),disabled:i===p,children:"Next"})]})]})]})}export{B as default};

import{r as o,j as t,L as W}from"./index-yNFFM0-c.js";import{S as b}from"./react-select.esm-B_SPqNnZ.js";import{m as _}from"./proxy-3_2GIcS0.js";function U(){const[m,T]=o.useState([]),[w,k]=o.useState([]),[E,O]=o.useState([]),[u,P]=o.useState("All"),[d,$]=o.useState("All"),[q,F]=o.useState([]),[M,C]=o.useState([]),[R,A]=o.useState([]),[r,Y]=o.useState("All"),[c,j]=o.useState("All"),[f,g]=o.useState("All"),[S,N]=o.useState(1),p=10;o.useEffect(()=>{fetch("https://beydecks-production.up.railway.app/api/events").then(e=>e.json()).then(e=>{const a=new Date,s=e.filter(i=>new Date(i.endTime)>a);T(s);const l=Array.from(new Set(s.map(i=>i.store.trim()))).sort();O(["All",...l]);const n=Array.from(new Set(s.map(i=>{var D;return(D=i.country)==null?void 0:D.trim()}).filter(i=>!!i))).sort();F(["All",...n])})},[]),o.useEffect(()=>{if(r==="All"){C(["All"]),A(["All"]),j("All"),g("All");return}const e=m.filter(s=>{var l;return((l=s.country)==null?void 0:l.trim().toLowerCase())===r.toLowerCase()}),a=Array.from(new Set(e.map(s=>{var l;return(l=s.region)==null?void 0:l.trim()}).filter(s=>!!s))).sort();C(["All",...a]),j("All"),g("All")},[r,m]),o.useEffect(()=>{if(c==="All"){const s=m.filter(n=>{var i;return((i=n.country)==null?void 0:i.trim().toLowerCase())===r.toLowerCase()}),l=Array.from(new Set(s.map(n=>{var i;return(i=n.city)==null?void 0:i.trim()}).filter(n=>!!n))).sort();A(["All",...l]);return}const e=m.filter(s=>{var l,n;return((l=s.country)==null?void 0:l.trim().toLowerCase())===r.toLowerCase()&&((n=s.region)==null?void 0:n.trim().toLowerCase())===c.toLowerCase()}),a=Array.from(new Set(e.map(s=>{var l;return(l=s.city)==null?void 0:l.trim()}).filter(s=>!!s))).sort();A(["All",...a]),g("All")},[c,r,m]),o.useEffect(()=>{let e=[...m];u!=="All"&&(e=e.filter(s=>s.store.trim().toLowerCase()===u.toLowerCase())),r!=="All"&&(e=e.filter(s=>{var l;return((l=s.country)==null?void 0:l.trim().toLowerCase())===r.toLowerCase()})),c!=="All"&&(e=e.filter(s=>{var l;return((l=s.region)==null?void 0:l.trim().toLowerCase())===c.toLowerCase()})),f!=="All"&&(e=e.filter(s=>{var l;return((l=s.city)==null?void 0:l.trim().toLowerCase())===f.toLowerCase()}));const a=new Date;if(d==="Next 30 Days"){const s=new Date;s.setDate(a.getDate()+30),e=e.filter(l=>new Date(l.startTime)<=s)}if(d==="This Year"){const s=new Date(a.getFullYear(),11,31);e=e.filter(l=>new Date(l.startTime)<=s)}e.sort((s,l)=>new Date(s.startTime).getTime()-new Date(l.startTime).getTime()),k(e),N(1)},[m,u,r,c,f,d]);const x=e=>e.map(a=>({label:a,value:a})),h=e=>({...e,colors:{...e.colors,neutral0:"#1f2937",neutral80:"#f9fafb",primary25:"#374151",primary:"#4f46e5"}}),y={control:e=>({...e,backgroundColor:"#1f2937",borderColor:"#374151",color:"#f9fafb"}),singleValue:e=>({...e,color:"#f9fafb"}),menu:e=>({...e,backgroundColor:"#1f2937",maxHeight:150,overflowY:"scroll",WebkitOverflowScrolling:"touch",scrollbarWidth:"auto",msOverflowStyle:"auto",zIndex:20}),option:(e,a)=>({...e,backgroundColor:a.isFocused?"#374151":"#1f2937",color:"#f9fafb",cursor:"pointer"})},v=S*p,B=v-p,V=w.slice(B,v),L=Math.ceil(w.length/p);return t.jsxs(_.div,{className:"p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[t.jsxs("h1",{className:"text-3xl font-bold mb-4",children:["Upcoming Events"," ",t.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["(",w.length," total)"]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 items-start",children:[t.jsxs("div",{className:"w-64",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Filter by Store:"}),t.jsx(b,{options:x(E),value:{label:u,value:u},onChange:e=>P((e==null?void 0:e.value)||"All"),theme:h,styles:y})]}),t.jsxs("div",{className:"w-64",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Country:"}),t.jsx(b,{options:x(q),value:{label:r,value:r},onChange:e=>Y((e==null?void 0:e.value)||"All"),theme:h,styles:y})]}),t.jsxs("div",{className:"w-64",children:[t.jsxs("p",{className:`font-semibold mb-1 ${r==="All"?"text-gray-400":""}`,children:["Province/State: ",r==="All"&&t.jsx("span",{className:"text-xs italic ml-1",children:"(select country first)"})]}),t.jsx(b,{options:x(M),value:{label:c,value:c},onChange:e=>j((e==null?void 0:e.value)||"All"),isDisabled:r==="All",theme:h,styles:y})]}),t.jsxs("div",{className:"w-64",children:[t.jsxs("p",{className:`font-semibold mb-1 ${r==="All"?"text-gray-400":""}`,children:["City: ",r==="All"&&t.jsx("span",{className:"text-xs italic ml-1",children:"(select country first)"})]}),t.jsx(b,{options:x(R),value:{label:f,value:f},onChange:e=>g((e==null?void 0:e.value)||"All"),isDisabled:r==="All",theme:h,styles:y})]}),t.jsxs("div",{className:"w-64",children:[t.jsx("p",{className:"font-semibold mb-1",children:"Timeframe:"}),t.jsx(b,{options:x(["All","This Year","Next 30 Days"]),value:{label:d,value:d},onChange:e=>$((e==null?void 0:e.value)||"All"),theme:h,styles:y})]})]}),t.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:V.map(e=>t.jsx("div",{className:"card bg-base-200 shadow-md",children:t.jsxs("div",{className:"card-body",children:[t.jsx("h2",{className:"card-title",children:e.title}),t.jsx("p",{className:"text-sm",children:new Date(e.startTime).toLocaleDateString()}),t.jsxs("p",{className:"text-sm",children:["@ ",e.store]}),(e.city||e.region||e.country)&&t.jsxs("p",{className:"text-sm text-neutral-content",children:["📍 ",[e.city,e.region,e.country].filter(Boolean).join(", ")]}),e.capacity!==void 0&&t.jsxs("p",{className:"text-sm text-neutral-content",children:["Capacity: ",e.capacity]}),t.jsxs("div",{className:"card-actions justify-end flex-wrap gap-2",children:[e.buyLink&&t.jsx("a",{href:e.buyLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline btn-sm",children:"Buy Ticket 🎟️"}),t.jsx(W,{to:`/events/${e.id}`,className:"btn btn-primary btn-sm",children:"View"})]})]})},e.id))}),L>1&&t.jsx("div",{className:"flex justify-center mt-6 gap-2",children:Array.from({length:L},(e,a)=>t.jsx("button",{className:`btn btn-sm ${S===a+1?"btn-primary":"btn-outline"}`,onClick:()=>N(a+1),children:a+1},a))})]})}export{U as default};

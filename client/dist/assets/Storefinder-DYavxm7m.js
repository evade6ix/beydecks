import{r as n,j as s,L as A}from"./index-yNFFM0-c.js";import{S as y}from"./react-select.esm-B_SPqNnZ.js";import{m as T}from"./proxy-3_2GIcS0.js";const D="https://beydecks-production.up.railway.app/api",g=20;function G(){const[r,w]=n.useState([]),[o,L]=n.useState(""),[c,x]=n.useState(1),[E,P]=n.useState([]),[k,R]=n.useState([]),[$,M]=n.useState([]),[l,q]=n.useState("All"),[m,p]=n.useState("All"),[d,j]=n.useState("All");n.useEffect(()=>{fetch(`${D}/stores`).then(e=>e.json()).then(e=>{w(e);const a=new Set;e.forEach(t=>{t.country&&a.add(t.country)});const i=Array.from(a).sort();P(["All",...i])})},[]),n.useEffect(()=>{const e=l==="All"?r:r.filter(t=>t.country===l),a=Array.from(new Set(e.map(t=>t.region).filter(t=>!!t))).sort(),i=Array.from(new Set(e.map(t=>t.city).filter(t=>!!t))).sort();R(["All",...a]),M(["All",...i]),p("All"),j("All")},[l,r]);const C=r.filter(e=>{var S,v,N;const a=e.name.toLowerCase().includes(o.toLowerCase())||((S=e.city)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((v=e.region)==null?void 0:v.toLowerCase().includes(o.toLowerCase()))||((N=e.country)==null?void 0:N.toLowerCase().includes(o.toLowerCase())),i=l==="All"||e.country===l,t=m==="All"||e.region===m,F=d==="All"||e.city===d;return a&&i&&t&&F}),u=Math.ceil(C.length/g),B=C.slice((c-1)*g,c*g),h=e=>e.map(a=>({label:a,value:a})),f=e=>({...e,colors:{...e.colors,neutral0:"#1f2937",neutral80:"#f9fafb",primary25:"#374151",primary:"#4f46e5"}}),b={control:e=>({...e,backgroundColor:"#1f2937",borderColor:"#374151",color:"#f9fafb"}),singleValue:e=>({...e,color:"#f9fafb"}),menu:e=>({...e,backgroundColor:"#1f2937",maxHeight:150,overflowY:"auto"}),menuList:e=>({...e,maxHeight:150,overflowY:"auto"}),option:(e,a)=>({...e,backgroundColor:a.isFocused?"#374151":"#1f2937",color:"#f9fafb",cursor:"pointer"})};return s.jsxs(T.div,{className:"p-6 max-w-5xl mx-auto",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Store Finder"}),s.jsx("div",{className:"mb-4",children:s.jsx("input",{type:"text",placeholder:"Search by store, city, region, or country...",className:"input input-bordered w-full",value:o,onChange:e=>{L(e.target.value),x(1)}})}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{className:"w-64",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Country:"}),s.jsx(y,{options:h(E),value:{label:l,value:l},onChange:e=>q((e==null?void 0:e.value)||"All"),theme:f,styles:b})]}),s.jsxs("div",{className:"w-64",children:[s.jsxs("p",{className:`font-semibold mb-1 ${l==="All"?"text-gray-400":""}`,children:["Province/State:",l==="All"&&s.jsx("span",{className:"text-xs ml-1 italic",children:"(select country first)"})]}),s.jsx(y,{options:h(k),value:{label:m,value:m},onChange:e=>p((e==null?void 0:e.value)||"All"),isDisabled:l==="All",theme:f,styles:b})]}),s.jsxs("div",{className:"w-64",children:[s.jsxs("p",{className:`font-semibold mb-1 ${l==="All"?"text-gray-400":""}`,children:["City:",l==="All"&&s.jsx("span",{className:"text-xs ml-1 italic",children:"(select country first)"})]}),s.jsx(y,{options:h($),value:{label:d,value:d},onChange:e=>j((e==null?void 0:e.value)||"All"),isDisabled:l==="All",theme:f,styles:b})]})]}),s.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:B.map(e=>s.jsx("div",{className:"card bg-base-200 shadow-md",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"card-title",children:e.name}),s.jsxs("p",{className:"text-sm",children:["ðŸ“ ",e.address,", ",e.city,", ",e.region,", ",e.country]}),e.logo&&s.jsx("img",{src:e.logo,alt:`${e.name} logo`,className:"w-full h-48 object-contain rounded-xl border bg-white p-2"}),s.jsxs("div",{className:"flex justify-between items-center mt-4",children:[s.jsx(A,{to:`/stores/${e.id}/upcoming`,className:"btn btn-sm btn-primary",children:"Events"}),s.jsx(A,{to:`/stores/${e.id}`,className:"btn btn-sm btn-primary",children:"View"})]})]})},e.id))}),u>1&&s.jsxs("div",{className:"mt-8 flex justify-center gap-4 items-center",children:[s.jsx("button",{className:"btn btn-sm",onClick:()=>x(e=>Math.max(1,e-1)),disabled:c===1,children:"Prev"}),s.jsxs("span",{className:"text-sm",children:["Page ",c," of ",u]}),s.jsx("button",{className:"btn btn-sm",onClick:()=>x(e=>Math.min(u,e+1)),disabled:c===u,children:"Next"})]})]})}export{G as default};

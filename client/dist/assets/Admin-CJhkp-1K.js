import{r as l,j as t,L as U}from"./index-yNFFM0-c.js";import{V as b}from"./index-v0OXVJcg.js";import{m as le}from"./proxy-3_2GIcS0.js";const r="https://beydecks-production.up.railway.app/api";function ce(){const[$,x]=l.useState([]),[H,g]=l.useState([]),[D,v]=l.useState(""),[P,j]=l.useState(""),[N,f]=l.useState(""),[A,y]=l.useState(),[R,C]=l.useState(),[I,S]=l.useState(""),[B,E]=l.useState(""),[F,w]=l.useState(""),[T,k]=l.useState(""),[O,p]=l.useState(""),[V,L]=l.useState(""),[u,_]=l.useState(null),[J,d]=l.useState([]),[o,i]=l.useState({name:"",address:"",logo:"",mapEmbedUrl:"",website:"",notes:"",country:"",region:"",city:""}),[m,G]=l.useState(null);l.useEffect(()=>{fetch(`${r}/events`).then(e=>e.json()).then(e=>{const s=e.sort((a,n)=>new Date(n.startTime).getTime()-new Date(a.startTime).getTime());x(s)}),fetch(`${r}/stores`).then(e=>e.json()).then(g)},[]);const M=()=>{_(null),v(""),S(""),E(""),w(""),d([]),j(""),f(""),y(void 0),C(void 0),k(""),p(""),L("")},K=()=>{const e={title:D,startTime:I,endTime:B,store:F,topCut:J,buyLink:P,imageUrl:N,capacity:A,attendeeCount:R,country:T,region:O,city:V},s=u?"PUT":"POST",a=u?`${r}/events/${u}`:`${r}/events`;fetch(a,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(()=>{b.success(u?"Event updated":"Event added"),M(),fetch(`${r}/events`).then(n=>n.json()).then(x)})},Q=e=>{d(s=>{const a=[...s];return a[e]={...a[e],combos:[...a[e].combos,{blade:"",ratchet:"",bit:"",notes:""}]},a})},h=(e,s,a,n)=>{d(c=>{const z=[...c];return z[e].combos[s][a]=n,z})},X=()=>{d(e=>[...e,{name:"",combos:[{blade:"",ratchet:"",bit:"",notes:""}]}])},Y=e=>{d(s=>s.filter((a,n)=>n!==e))},Z=(e,s)=>{d(a=>{const n=[...a];return n[e].name=s,n})},ee=()=>{const e=m?"PUT":"POST",s=m?`${r}/stores/${m}`:`${r}/stores`;fetch(s,{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(()=>{b.success(m?"Store updated":"Store added"),i({name:"",address:"",logo:"",mapEmbedUrl:"",website:"",notes:"",country:"",region:"",city:""}),G(null),fetch(`${r}/stores`).then(a=>a.json()).then(g)})},te=e=>{G(e.id);const{id:s,...a}=e;i(a)},se=e=>{fetch(`${r}/stores/${e}`,{method:"DELETE"}).then(()=>{b.success("Store deleted"),fetch(`${r}/stores`).then(s=>s.json()).then(g)})},W=e=>{fetch(`${r}/events/${e}`,{method:"DELETE"}).then(()=>{b.success("Event deleted"),fetch(`${r}/events`).then(s=>s.json()).then(x)})},q=e=>{_(e.id),v(e.title),S(e.startTime),E(e.endTime),w(e.store),j(e.buyLink||""),f(e.imageUrl||""),d(e.topCut||[]),y(e.capacity),C(e.attendeeCount),k(e.country||""),p(e.region||""),L(e.city||"")},ae=$.filter(e=>new Date(e.startTime)>new Date),ne=$.filter(e=>new Date(e.startTime)<=new Date);return t.jsxs(le.div,{className:"p-6 max-w-5xl mx-auto space-y-12",initial:{opacity:0},animate:{opacity:1},children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),t.jsxs("div",{className:"card bg-base-200 p-4 space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Create or Edit Event"}),t.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[t.jsx("input",{className:"input input-bordered",placeholder:"Title",value:D,onChange:e=>v(e.target.value)}),t.jsx("input",{className:"input input-bordered",type:"datetime-local",value:I,onChange:e=>S(e.target.value)}),t.jsx("input",{className:"input input-bordered",type:"datetime-local",value:B,onChange:e=>E(e.target.value)}),t.jsx("input",{className:"input input-bordered",placeholder:"Store",value:F,onChange:e=>w(e.target.value)})]}),t.jsx("input",{className:"input input-bordered",placeholder:"Buy Ticket URL",value:P,onChange:e=>j(e.target.value)}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold",children:"Event Image"}),t.jsx("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered w-full",onChange:e=>{var n;const s=(n=e.target.files)==null?void 0:n[0];if(!s)return;const a=new FileReader;a.onloadend=()=>{f(a.result)},a.readAsDataURL(s)}}),N&&t.jsx("img",{src:N,alt:"Event Preview",className:"w-48 mx-auto rounded"})]}),t.jsx("input",{className:"input input-bordered",type:"number",placeholder:"Capacity (for upcoming)",value:A??"",onChange:e=>y(e.target.value?parseInt(e.target.value):void 0)}),t.jsx("input",{className:"input input-bordered",type:"number",placeholder:"Attendee Count (for completed)",value:R??"",onChange:e=>C(e.target.value?parseInt(e.target.value):void 0)}),t.jsxs("select",{className:"select select-bordered",value:T,onChange:e=>{k(e.target.value),p("")},children:[t.jsx("option",{value:"",children:"Select Country"}),t.jsx("option",{value:"Canada",children:"Canada"}),t.jsx("option",{value:"United States",children:"United States"})]}),t.jsx("input",{className:"input input-bordered",placeholder:T==="Canada"?"Province":"State",value:O,onChange:e=>p(e.target.value)}),t.jsx("input",{className:"input input-bordered",placeholder:"City",value:V,onChange:e=>L(e.target.value)}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"font-semibold",children:"Top Cut Combos"}),J.map((e,s)=>t.jsxs("div",{className:"space-y-2 border rounded p-2",children:[t.jsx("input",{className:"input input-sm w-full",placeholder:"Player Name",value:e.name,onChange:a=>Z(s,a.target.value)}),e.combos.map((a,n)=>t.jsxs("div",{className:"grid md:grid-cols-4 gap-2",children:[t.jsx("input",{className:"input input-sm",placeholder:"Blade",value:a.blade,onChange:c=>h(s,n,"blade",c.target.value)}),t.jsx("input",{className:"input input-sm",placeholder:"Ratchet",value:a.ratchet,onChange:c=>h(s,n,"ratchet",c.target.value)}),t.jsx("input",{className:"input input-sm",placeholder:"Bit",value:a.bit,onChange:c=>h(s,n,"bit",c.target.value)}),t.jsx("input",{className:"input input-sm",placeholder:"Notes",value:a.notes??"",onChange:c=>h(s,n,"notes",c.target.value)})]},n)),t.jsx("button",{className:"btn btn-outline btn-xs",onClick:()=>Q(s),children:"Add Combo"}),t.jsx("button",{className:"btn btn-error btn-xs",onClick:()=>Y(s),children:"Remove Player"})]},s)),t.jsx("button",{className:"btn btn-outline btn-sm",onClick:X,children:"Add Player"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{className:"btn btn-primary",onClick:K,children:[u?"Update":"Add"," Event"]}),u&&t.jsx("button",{className:"btn btn-ghost",onClick:M,children:"Cancel"})]})]}),t.jsxs("div",{className:"card bg-base-200 p-4 space-y-4",children:[t.jsx("h2",{className:"text-xl font-bold",children:"Add or Edit Store"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsx("input",{className:"input input-bordered",placeholder:"Name",value:o.name,onChange:e=>i(s=>({...s,name:e.target.value}))}),t.jsx("input",{className:"input input-bordered",placeholder:"Address",value:o.address,onChange:e=>i(s=>({...s,address:e.target.value}))}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-sm font-semibold",children:"Store Logo"}),t.jsx("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered w-full",onChange:e=>{var n;const s=(n=e.target.files)==null?void 0:n[0];if(!s)return;const a=new FileReader;a.onloadend=()=>{i(c=>({...c,logo:a.result}))},a.readAsDataURL(s)}}),o.logo&&t.jsx("img",{src:o.logo,alt:"Preview",className:"w-32 h-32 object-contain border rounded"})]}),t.jsx("input",{className:"input input-bordered",placeholder:"Google Maps Embed URL",value:o.mapEmbedUrl,onChange:e=>i(s=>({...s,mapEmbedUrl:e.target.value}))}),t.jsx("input",{className:"input input-bordered",placeholder:"Website",value:o.website,onChange:e=>i(s=>({...s,website:e.target.value}))}),t.jsxs("select",{className:"select select-bordered",value:o.country,onChange:e=>i(s=>({...s,country:e.target.value})),children:[t.jsx("option",{value:"",children:"Select Country"}),t.jsx("option",{value:"Canada",children:"Canada"}),t.jsx("option",{value:"United States",children:"United States"})]}),t.jsx("input",{className:"input input-bordered",placeholder:o.country==="Canada"?"Province":"State",value:o.region,onChange:e=>i(s=>({...s,region:e.target.value}))}),t.jsx("input",{className:"input input-bordered",placeholder:"City",value:o.city,onChange:e=>i(s=>({...s,city:e.target.value}))})]}),t.jsx("textarea",{className:"textarea textarea-bordered w-full",placeholder:"Notes",value:o.notes,onChange:e=>i(s=>({...s,notes:e.target.value}))}),t.jsxs("button",{className:"btn btn-success",onClick:ee,children:[m?"Update":"Add"," Store"]})]}),t.jsxs("details",{className:"bg-base-200 p-4 rounded-lg",children:[t.jsx("summary",{className:"text-xl font-bold cursor-pointer",children:"Upcoming Events"}),t.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 mt-4",children:ae.map(e=>t.jsxs("div",{className:"card bg-base-100 p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.title}),t.jsxs("p",{className:"text-sm text-neutral-content",children:[new Date(e.startTime).toLocaleString()," â†’ ",new Date(e.endTime).toLocaleTimeString()," @ ",e.store]}),e.buyLink&&t.jsx("a",{href:e.buyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 underline",children:"Buy Ticket Link"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{to:`/events/${e.id}`,className:"btn btn-outline btn-sm",children:"View"}),t.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>q(e),children:"Edit"}),t.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>W(e.id),children:"Delete"})]})]},e.id))})]}),t.jsxs("details",{className:"bg-base-200 p-4 rounded-lg",children:[t.jsx("summary",{className:"text-xl font-bold cursor-pointer",children:"Completed Events"}),t.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 mt-4",children:ne.map(e=>t.jsxs("div",{className:"card bg-base-100 p-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.title}),t.jsxs("p",{className:"text-sm text-neutral-content",children:[new Date(e.startTime).toLocaleString()," â†’ ",new Date(e.endTime).toLocaleTimeString()," @ ",e.store]}),e.buyLink&&t.jsx("a",{href:e.buyLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 underline",children:"Buy Ticket Link"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{to:`/events/${e.id}`,className:"btn btn-outline btn-sm",children:"View"}),t.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>q(e),children:"Edit"}),t.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>W(e.id),children:"Delete"})]})]},e.id))})]}),t.jsxs("details",{className:"bg-base-200 p-4 rounded-lg",children:[t.jsx("summary",{className:"text-xl font-bold cursor-pointer",children:"All Stores"}),t.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 mt-4",children:H.map(e=>t.jsxs("div",{className:"card bg-base-100 p-4 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-semibold",children:e.name}),t.jsx("p",{className:"text-sm text-neutral-content",children:e.address})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(U,{to:`/stores/${e.id}`,className:"btn btn-outline btn-sm",children:"View"}),t.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>te(e),children:"Edit"}),t.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>se(e.id),children:"Delete"})]})]},e.id))})]})]})}export{ce as default};

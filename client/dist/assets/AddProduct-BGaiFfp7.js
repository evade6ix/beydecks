import{u as w,r,j as t}from"./index-yNFFM0-c.js";import{V as c}from"./index-v0OXVJcg.js";const P="https://beydecks-production.up.railway.app/api";function L(){const h=w(),[u,g]=r.useState(""),[l,x]=r.useState(""),[d,y]=r.useState(""),[p,v]=r.useState(""),[m,b]=r.useState(""),[o,i]=r.useState([{storeName:"",buyLink:"",country:"Canada"}]),N=e=>new Promise((s,n)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=C=>n(C),a.readAsDataURL(e)}),f=async e=>{try{const s=await N(e);x(s),c.success("Image converted to base64!")}catch{c.error("Failed to convert image")}},j=async()=>{if(!l){c.error("Please upload an image");return}const e={title:u,imageUrl:l,description:d,brand:p,productType:m,listings:o};(await fetch(`${P}/products`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(c.success("Product added!"),h("/shop")):c.error("Failed to add product")};return t.jsxs("div",{className:"p-6 max-w-3xl mx-auto space-y-4",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"Add a New Product"}),t.jsx("input",{className:"input input-bordered w-full",placeholder:"Product Title",value:u,onChange:e=>g(e.target.value)}),t.jsx("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered w-full",onChange:e=>{var n;const s=(n=e.target.files)==null?void 0:n[0];s&&f(s)}}),l&&t.jsx("img",{src:l,alt:"Preview",className:"w-48 mx-auto rounded"}),t.jsx("textarea",{className:"textarea textarea-bordered w-full",placeholder:"Product Description",value:d,onChange:e=>y(e.target.value)}),t.jsx("input",{className:"input input-bordered w-full",placeholder:"Brand",value:p,onChange:e=>v(e.target.value)}),t.jsx("input",{className:"input input-bordered w-full",placeholder:"Product Type",value:m,onChange:e=>b(e.target.value)}),t.jsx("h3",{className:"font-semibold mt-4",children:"Buy Links"}),o.map((e,s)=>t.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[t.jsx("input",{className:"input input-sm",placeholder:"Store Name",value:e.storeName,onChange:n=>{const a=[...o];a[s].storeName=n.target.value,i(a)}}),t.jsx("input",{className:"input input-sm",placeholder:"Buy Link",value:e.buyLink,onChange:n=>{const a=[...o];a[s].buyLink=n.target.value,i(a)}}),t.jsxs("select",{className:"select select-sm",value:e.country,onChange:n=>{const a=[...o];a[s].country=n.target.value,i(a)},children:[t.jsx("option",{value:"Canada",children:"Canada"}),t.jsx("option",{value:"United States",children:"United States"})]})]},s)),t.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>i([...o,{storeName:"",buyLink:"",country:"Canada"}]),children:"+ Add Another Store"}),t.jsx("div",{children:t.jsx("button",{className:"btn btn-success mt-4",onClick:j,children:"Submit Product"})})]})}export{L as default};

import{d as A,u as E,r as d,j as s,N as H}from"./index-yNFFM0-c.js";function F(){var N;const{isAuthenticated:w,user:o}=A(),v=E(),[C,P]=d.useState([]),[r,g]=d.useState(null),[n,y]=d.useState(1),m=10,[c,h]=d.useState(1),u=5;if(d.useEffect(()=>{if(o!=null&&o.matchupHistory&&Array.isArray(o.matchupHistory)){const e=o.matchupHistory.filter(t=>t==null?void 0:t.id);P(e)}},[o]),!w||!o)return s.jsx(H,{to:"/user-login"});const i={};C.forEach(e=>{const{blade:t,ratchet:x,bit:p}=e.myCombo,l=`${t} | ${x} | ${p}`,a=t.trim();i[a]||(i[a]={wins:0,losses:0,combos:{}}),i[a].combos[l]||(i[a].combos[l]={wins:0,losses:0}),e.result==="win"?(i[a].wins++,i[a].combos[l].wins++):(i[a].losses++,i[a].combos[l].losses++)});const b=Object.entries(i).sort(([,e],[,t])=>t.wins+t.losses-(e.wins+e.losses)),S=b.slice((n-1)*m,n*m),j=r?Object.entries(((N=i[r])==null?void 0:N.combos)||{}):[],B=j.slice((c-1)*u,c*u),k=e=>{r===e?g(null):(g(e),h(1))};return s.jsxs("div",{className:"p-6 max-w-4xl mx-auto text-white space-y-8",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Blade Matchup Stats"}),s.jsx("button",{onClick:()=>v("/profile"),className:"text-sm bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded",children:"Back to Profile"})]}),b.length===0?s.jsx("p",{className:"text-gray-400",children:"No matchups submitted yet."}):s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"space-y-6",children:S.map(([e,t])=>{const x=t.wins+t.losses,p=x>0?(t.wins/x*100).toFixed(1):"0";return s.jsxs("li",{className:"bg-gray-800 p-4 rounded",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e}),s.jsx("button",{onClick:()=>k(e),className:"text-sm bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded",children:r===e?"Hide Combos":"View Combos"})]}),s.jsxs("p",{className:"text-gray-300",children:["Wins: ",t.wins," | Losses: ",t.losses," | Win Rate: ",p,"%"]}),r===e&&s.jsxs("div",{className:"mt-4 text-sm text-gray-200",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Combos:"}),s.jsx("ul",{className:"space-y-1",children:B.map(([l,a])=>{const f=a.wins+a.losses,R=f>0?(a.wins/f*100).toFixed(1):"0";return s.jsxs("li",{className:"border border-gray-600 p-2 rounded",children:[s.jsx("p",{children:s.jsx("strong",{children:l})}),s.jsxs("p",{children:["Wins: ",a.wins," | Losses: ",a.losses," | Win Rate: ",R,"%"]})]},l)})}),s.jsxs("div",{className:"flex justify-center mt-2 gap-2",children:[s.jsx("button",{disabled:c===1,onClick:()=>h(c-1),className:"px-3 py-1 bg-gray-700 rounded text-white disabled:opacity-30",children:"Prev"}),s.jsx("button",{disabled:c*u>=j.length,onClick:()=>h(c+1),className:"px-3 py-1 bg-gray-700 rounded text-white disabled:opacity-30",children:"Next"})]})]})]},e)})}),s.jsxs("div",{className:"flex justify-center mt-4 gap-2",children:[s.jsx("button",{disabled:n===1,onClick:()=>y(n-1),className:"px-3 py-1 bg-gray-700 rounded text-white disabled:opacity-30",children:"Prev"}),s.jsx("button",{disabled:n*m>=b.length,onClick:()=>y(n+1),className:"px-3 py-1 bg-gray-700 rounded text-white disabled:opacity-30",children:"Next"})]})]})]})}export{F as default};
